# My, Andreas Langenhagen's, lf rc file.
#
# see: https://github.com/gokcehan/lf/blob/master/etc/lfrc.example
# see: https://godoc.org/github.com/gokcehan/lf

# settings
set color256 on
set hidden
set incsearch on
set number on
set previewer ~/.config/lf/previewer.sh

# key mappings
map <enter> shell
map <delete> delete
map D delete
map S $$SHELL

# define a custom 'open' command
# This command is called when current file is not a directory. You may want to
# use either file extensions and/or mime types here. Below uses an editor for
# text files and a file opener for the rest.
cmd open ${{
    case $(file --mime-type -Lb $f) in
        application/csv)            $EDITOR $fx;;
        application/json)           $EDITOR $fx;;
        application/x-shellscript)  $EDITOR $fx;;
        inode/x-empty)              $EDITOR $fx;;
        text/*)                     $EDITOR $fx;;
        *) for f in $fx; do setsid $OPENER $f > /dev/null 2> /dev/null & done;;
    esac
}}

cmd fzf_jump ${{
    res="$(fzf --header='Jump to location')"
    if [ -f "$res" ]; then
        cmd='select'
    elif [ -d "$res" ]; then
        cmd='cd'
    fi
    lf -remote "send $id $cmd '$res'"
}}
map <c-e> :fzf_jump
