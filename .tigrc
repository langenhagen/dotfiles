# !   Run the command in the foreground with output shown.
# @   Run the command in the background with no output.
# ?   Prompt the user before executing the command.
# <  Exit Tig after executing the command.
# For example:
# bind generic e !?/usr/local/bin/sublime

set mouse = true

bind generic Z @?git checkout HEAD %(file)           # checkout latest committed version of a file in status view

# E open file in editor (actually, tig's builtin small 'e' open file in editor does already a good job
bind diff    E !sh -c "if [ -z \"%(file)\" ] ; then vim `git diff-tree --no-commit-id --name-only -r %(commit) | head -1` ; else vim \"%(file)\" +%(lineno); fi"
bind stage   E !sh -c "vim \"%(file)\" +%(lineno)"
bind status  E !sh -c "vim \"%(file)\" +%(lineno)"

bind stage  D @?rm %(file)  # remove a file
bind status D @?rm %(file)  # remove a file

bind generic + !git commit --amend
bind generic = !git commit

bind generic π !git add --patch %(file)             # π is alt + p

bind generic ` !git rebase --interactive HEAD~7

bind generic 1 !git pull --rebase

bind generic 8 !<git push
bind generic 9 !<git push origin HEAD:master
bind generic 0 !<git push origin HEAD:refs/for/master

bind generic <F10> quit

bind generic P @sh -c "xdg-open \"$(dirname $(realpath %(file)))\""  # open path in standard program, linux only

# -------------------------------------------------------------------------------------------------

set ignore-case            = yes                     # Enum consisting of the values: no, yes, smart-case

# -------------------------------------------------------------------------------------------------

# Henrik used also:
# bind stash D !?git stash drop %(stash)
# bind stash A !?git stash apply %(stash)
# bind status S !?git stash save --keep-index %(prompt)


# nice tigrc variables:
# %(file)
# %(lineno)
# %(blob)       Manual says: "The currently selected blob ID.", I think it is the currently selected patch

# 2019-02-18: leftover that looks wrong and may be deleted
# bind generic T !git checkout --theirs %(file)       # what is this?
# bind generic T !git checkout --ours %(file)         # what is this?

# also look at https://jonas.github.io/tig/doc/manual.html

